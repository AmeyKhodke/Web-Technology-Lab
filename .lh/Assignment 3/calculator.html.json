{
    "sourceFile": "Assignment 3/calculator.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1771583767073,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1771583767073,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>JavaScript Calculator</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            display: flex;\r\n            justify-content: center;\r\n            align-items: center;\r\n            height: 100vh;\r\n            margin: 0;\r\n            background-color: #f0f0f0;\r\n        }\r\n        .calculator {\r\n            background-color: #333;\r\n            border-radius: 10px;\r\n            padding: 20px;\r\n            box-shadow: 0 0 20px rgba(0,0,0,0.5);\r\n        }\r\n        .display {\r\n            background-color: #222;\r\n            color: white;\r\n            font-size: 24px;\r\n            text-align: right;\r\n            padding: 10px;\r\n            margin-bottom: 10px;\r\n            border-radius: 5px;\r\n            min-height: 40px;\r\n        }\r\n        .buttons {\r\n            display: grid;\r\n            grid-template-columns: repeat(4, 1fr);\r\n            gap: 10px;\r\n        }\r\n        button {\r\n            background-color: #666;\r\n            color: white;\r\n            border: none;\r\n            padding: 15px;\r\n            font-size: 18px;\r\n            border-radius: 5px;\r\n            cursor: pointer;\r\n            transition: background-color 0.2s;\r\n        }\r\n        button:hover {\r\n            background-color: #888;\r\n        }\r\n        button.operator {\r\n            background-color: #f39c12;\r\n        }\r\n        button.operator:hover {\r\n            background-color: #e67e22;\r\n        }\r\n        button.equal {\r\n            background-color: #27ae60;\r\n            grid-column: span 2;\r\n        }\r\n        button.equal:hover {\r\n            background-color: #229954;\r\n        }\r\n        button.clear {\r\n            background-color: #e74c3c;\r\n        }\r\n        button.clear:hover {\r\n            background-color: #c0392b;\r\n        }\r\n        .error {\r\n            color: red;\r\n            font-size: 14px;\r\n            margin-top: 10px;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <div class=\"calculator\">\r\n        <div class=\"display\" id=\"display\">0</div>\r\n        <div class=\"buttons\">\r\n            <button class=\"clear\" onclick=\"clearDisplay()\">C</button>\r\n            <button onclick=\"appendToDisplay('(')\">(</button>\r\n            <button onclick=\"appendToDisplay(')')\">)</button>\r\n            <button class=\"operator\" onclick=\"appendToDisplay('/')\">/</button>\r\n            \r\n            <button onclick=\"appendToDisplay('7')\">7</button>\r\n            <button onclick=\"appendToDisplay('8')\">8</button>\r\n            <button onclick=\"appendToDisplay('9')\">9</button>\r\n            <button class=\"operator\" onclick=\"appendToDisplay('*')\">*</button>\r\n            \r\n            <button onclick=\"appendToDisplay('4')\">4</button>\r\n            <button onclick=\"appendToDisplay('5')\">5</button>\r\n            <button onclick=\"appendToDisplay('6')\">6</button>\r\n            <button class=\"operator\" onclick=\"appendToDisplay('-')\">-</button>\r\n            \r\n            <button onclick=\"appendToDisplay('1')\">1</button>\r\n            <button onclick=\"appendToDisplay('2')\">2</button>\r\n            <button onclick=\"appendToDisplay('3')\">3</button>\r\n            <button class=\"operator\" onclick=\"appendToDisplay('+')\">+</button>\r\n            \r\n            <button onclick=\"appendToDisplay('0')\">0</button>\r\n            <button onclick=\"appendToDisplay('.')\">.</button>\r\n            <button class=\"equal\" onclick=\"calculate()\">=</button>\r\n        </div>\r\n        <div class=\"error\" id=\"error\"></div>\r\n    </div>\r\n\r\n    <script>\r\n        let display = document.getElementById('display');\r\n        let errorDiv = document.getElementById('error');\r\n\r\n        function appendToDisplay(value) {\r\n            errorDiv.textContent = '';\r\n            if (display.textContent === '0' && value !== '.') {\r\n                display.textContent = value;\r\n            } else {\r\n                display.textContent += value;\r\n            }\r\n            validateInput();\r\n        }\r\n\r\n        function clearDisplay() {\r\n            display.textContent = '0';\r\n            errorDiv.textContent = '';\r\n        }\r\n\r\n        function calculate() {\r\n            try {\r\n                let expression = display.textContent;\r\n                \r\n                // Basic validation\r\n                if (!isValidExpression(expression)) {\r\n                    throw new Error('Invalid expression');\r\n                }\r\n                \r\n                // Check for division by zero\r\n                if (expression.includes('/0')) {\r\n                    throw new Error('Division by zero');\r\n                }\r\n                \r\n                // Evaluate the expression\r\n                let result = eval(expression);\r\n                \r\n                // Check if result is a number\r\n                if (isNaN(result) || !isFinite(result)) {\r\n                    throw new Error('Invalid calculation');\r\n                }\r\n                \r\n                display.textContent = result;\r\n            } catch (error) {\r\n                errorDiv.textContent = error.message;\r\n                display.textContent = 'Error';\r\n            }\r\n        }\r\n\r\n        function validateInput() {\r\n            let expression = display.textContent;\r\n            \r\n            // Check for consecutive operators\r\n            if (/[\\+\\-\\*\\/]{2,}/.test(expression)) {\r\n                errorDiv.textContent = 'Invalid: consecutive operators';\r\n                return false;\r\n            }\r\n            \r\n            // Check for invalid characters\r\n            if (/[^0-9\\+\\-\\*\\/\\(\\)\\.]/.test(expression)) {\r\n                errorDiv.textContent = 'Invalid characters';\r\n                return false;\r\n            }\r\n            \r\n            // Check for mismatched parentheses\r\n            let openCount = (expression.match(/\\(/g) || []).length;\r\n            let closeCount = (expression.match(/\\)/g) || []).length;\r\n            if (openCount !== closeCount) {\r\n                errorDiv.textContent = 'Mismatched parentheses';\r\n                return false;\r\n            }\r\n            \r\n            return true;\r\n        }\r\n\r\n        function isValidExpression(expression) {\r\n            // Basic checks\r\n            if (!expression || expression === 'Error') {\r\n                return false;\r\n            }\r\n            \r\n            // Must end with a number or closing parenthesis\r\n            if (!/[0-9\\)]$/.test(expression)) {\r\n                return false;\r\n            }\r\n            \r\n            // Must start with a number, opening parenthesis, or minus\r\n            if (!/^[0-9\\(\\-]/.test(expression)) {\r\n                return false;\r\n            }\r\n            \r\n            return true;\r\n        }\r\n\r\n        // Prevent keyboard input for now (optional)\r\n        document.addEventListener('keydown', function(event) {\r\n            event.preventDefault();\r\n        });\r\n    </script>\r\n</body>\r\n</html>\r\n"
        }
    ]
}